<!doctype html>
<html>
  <head>
    <style>
      /* Estilo del canvas, se le añade un borde gris */
      canvas {
        border: 1px solid grey;
      }
    </style>
  </head>
  <body>
    <!-- Se crea un canvas (lienzo) donde se dibujarán los elementos -->
    <canvas></canvas>

    <script>
      // Se inicializan las coordenadas x e y
      var x = 20;
      var y = 20;

      // Se selecciona el elemento canvas del DOM
      var lienzo = document.querySelector("canvas");

      // Se obtiene el contexto 2D del canvas, lo que permitirá dibujar en él
      var contexto = lienzo.getContext("2d");

      // Se establece el ancho y alto del canvas (512 x 512 píxeles)
      lienzo.width = 512;
      lienzo.height = 512;

      // Se define un temporizador que llama a la función "bucle" después de 1 segundo (1000 ms)
      var temporizador = setTimeout("bucle()", 1000);

      // Función bucle que se ejecuta cada segundo
      function bucle() {
        // Se incrementa la coordenada x en 10 unidades en cada llamada al bucle
        x += 10;

        // Se dibuja un rectángulo de 30x30 píxeles en la nueva posición (x, y)
        contexto.fillRect(x, y, 30, 30);

        // Muestra un mensaje en la consola para verificar que el bucle se ejecuta
        console.log("esto es un bucle");

        // Se detiene el temporizador actual para evitar múltiples ejecuciones superpuestas
        clearTimeout(temporizador);

        // Se reinicia el temporizador para que la función bucle se vuelva a ejecutar en 1 segundo
        temporizador = setTimeout("bucle()", 1000);
      }
    </script>
  </body>
</html>
